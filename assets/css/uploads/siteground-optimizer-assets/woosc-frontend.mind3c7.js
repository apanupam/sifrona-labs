"use strict";(function(e){var o=0;e(function(){E(),u("first"),h(),O(),_(),w(),woosc_vars.reload_count==="yes"&&t("count"),woosc_vars.open_bar==="yes"&&(t("bar"),i()),e(".woosc-settings-fields").sortable({handle:".move",update:function(){b()}}),woosc_vars.button_action==="show_message"&&e.notiny.addTheme("woosc",{notification_class:"notiny-theme-woosc"}),y()}),e(window).on("resize",function(){y()}),e(document).on("click touch",".woosc_table .woosq-btn, .woosc_table .woosq-link",function(e){e.preventDefault(),m()}),e(document).on("click touch",".woosc-sidebar .woosq-btn, .woosc-sidebar .woosq-link",function(e){e.preventDefault(),r()}),e(document).on("click touch",".woosc-table-settings",function(t){t.preventDefault(),e(".woosc-settings").toggleClass("open")}),e(document).on("click touch",".woosc-bar-print",function(t){t.preventDefault(),e.print("#woosc-area")}),e(document).on("change","#woosc-filter",function(e){e.preventDefault(),v()}),e(document).on("keydown",function(t){(t.ctrlKey==!0||t.metaKey==!0)&&t.which=="80"&&e(".woosc-area").hasClass("woosc-area-open-table")&&(t.preventDefault(),e.print("#woosc-area"))}),e(document).on("click touch",".woosc-bar-share",function(t){t.preventDefault(),e(".woosc-share").toggleClass("open"),e(".woosc-share-content").addClass("woosc-loading");var n={action:"woosc_share",nonce:woosc_vars.nonce};jQuery.post(woosc_vars.wc_ajax_url.toString().replace("%%endpoint%%","woosc_share"),n,function(t){e(".woosc-share-content").html(t).removeClass("woosc-loading")})}),e(document).on("click touch","#woosc_copy_url, #woosc_copy_btn",function(t){t.preventDefault();let n=e("#woosc_copy_url"),s=n.val();navigator.clipboard.writeText(s).then(function(){alert(woosc_vars.copied_text.replace("%s",s))},function(){alert("Failure to copy!")}),n.select()}),e(document).on("click touch",".woosc-bar-search",function(t){if(t.preventDefault(),e(".woosc-search").toggleClass("open"),e(".woosc-search-result").text()==="")return o!=null&&clearTimeout(o),o=setTimeout(j,300),!1}),e(document).on("click touch",".woosc-popup",function(t){e(t.target).closest(".woosc-popup-content").length===0&&e(this).toggleClass("open")}),e(document).on("keyup","#woosc_search_input",function(){if(e("#woosc_search_input").val()!=="")return o!=null&&clearTimeout(o),o=setTimeout(j,300),!1}),e(document).on("click touch",".woosc-item-add",function(n){n.preventDefault();var s=e(this).attr("data-id");e(".woosc-search").toggleClass("open"),g(s),t("table"),a()}),e(document).on("click touch",".woosc-popup-close",function(t){t.preventDefault(),e(this).closest(".woosc-popup").toggleClass("open")}),e(document).on("woovr_selected",function(t,n){if(woosc_vars.variations==="yes"){var o=n.attr("data-id"),s=n.attr("data-pid");o>0?e(".woosc-btn-"+s).removeClass("woosc-btn-added woosc-added").attr("data-id",o).attr("data-product_id",o):e(".woosc-btn-"+s).removeClass("woosc-btn-added woosc-added").attr("data-id",s).attr("data-product_id",s)}}),e(document).on("found_variation",function(t,n){if(woosc_vars.variations==="yes"){var s=e(t.target).attr("data-product_id");e(".woosc-btn-"+s).each(function(){let t=e(this),s=t.data("text")!==void 0&&t.data("text")!==""?t.data("text"):woosc_vars.button_text;t.removeClass("woosc-btn-added woosc-added").attr("data-id",n.variation_id).attr("data-product_id",n.variation_id),t.hasClass("woosc-btn-has-icon")?(t.find(".woosc-btn-icon").removeClass(woosc_vars.button_added_icon).addClass(woosc_vars.button_normal_icon),t.find(".woosc-btn-text").text(s)):t.text(s)})}}),e(document).on("reset_data",function(t){if(woosc_vars.variations==="yes"){var n=e(t.target).attr("data-product_id");e(".woosc-btn-"+n).each(function(){let t=e(this),s=t.data("text")!==void 0&&t.data("text")!==""?t.data("text"):woosc_vars.button_text;t.removeClass("woosc-btn-added woosc-added").attr("data-id",n).attr("data-product_id",n),t.hasClass("woosc-btn-has-icon")?(t.find(".woosc-btn-icon").removeClass(woosc_vars.button_added_icon).addClass(woosc_vars.button_normal_icon),t.find(".woosc-btn-text").text(s)):t.text(s)})}}),e(document).on("click touch",".woosc-bar-remove",function(e){e.preventDefault();var n=confirm(woosc_vars.remove_all);n==!0&&(c("all"),t("table"))}),e(document).on("click touch",".woosc-btn",function(n){n.preventDefault();var s=e(this),o=s.attr("data-id"),r=s.attr("data-pid"),l=s.attr("data-product_id"),d=s.attr("data-product_name"),u=s.attr("data-product_image");typeof r!==typeof void 0&&r!==!1&&(o=r),typeof l!==typeof void 0&&l!==!1&&(o=l),s.hasClass("woosc-btn-added woosc-added")?woosc_vars.click_again==="yes"?(c(o),woosc_vars.button_action==="show_message"&&e.notiny({theme:"woosc",position:woosc_vars.message_position,image:u,text:woosc_vars.message_removed.replace("{name}","<strong>"+d+"</strong>")})):woosc_vars.button_action==="show_message"&&e.notiny({theme:"woosc",position:woosc_vars.message_position,image:u,text:woosc_vars.message_exists.replace("{name}","<strong>"+d+"</strong>")}):(s.addClass("woosc-btn-adding woosc-adding"),g(o),woosc_vars.button_action==="show_message"&&e.notiny({theme:"woosc",position:woosc_vars.message_position,image:u,text:woosc_vars.message_added.replace("{name}","<strong>"+d+"</strong>")})),woosc_vars.button_action==="show_bar"&&(t("bar"),i()),woosc_vars.button_action==="show_table"&&(t("table"),i(),a()),(woosc_vars.button_action==="show_message"||woosc_vars.button_action==="none")&&e(".woosc-bar").hasClass("woosc-bar-open")&&t("bar"),woosc_vars.button_action==="show_sidebar"&&(t("sidebar"),p())}),e(document).on("click touch","#woosc-area .woosc-bar-item-remove, #woosc-area .woosc-remove",function(n){n.preventDefault();var s=e(this).attr("data-id");e(this).parent().addClass("removing"),c(s),t("table"),h()}),e(document).on("click touch",".woosc-page .woosc-remove",function(t){t.preventDefault();var n=e(this).attr("data-id");c(n),location.reload()}),e(document).on("click touch",".woosc-page .woosc-remove-all",function(e){e.preventDefault();var t=confirm(woosc_vars.remove_all);t==!0&&c("all"),location.reload()}),e(document).on("click touch",".woosc-sidebar-item-remove",function(t){t.preventDefault();var n=e(this).closest(".woosc-sidebar-item").attr("data-id");c(n),e(this).closest(".woosc-sidebar-item").slideUp(),h()}),e(document).on("click touch",".woosc-bar-btn",function(n){n.preventDefault(),e(".woosc-table-items").hasClass("woosc-table-items-loaded")||t("table"),S()}),e(document).on("click touch",function(t){(woosc_vars.click_outside==="yes"||woosc_vars.click_outside==="yes_empty"&&parseInt(e(".woosc-bar").attr("data-count"))===0)&&e(t.target).closest(".wpc_compare_count").length===0&&e(t.target).closest(".woosc-popup").length===0&&e(t.target).closest(".woosc-btn").length===0&&e(t.target).closest(".woosc-table").length===0&&e(t.target).closest(".woosc-bar").length===0&&e(t.target).closest(".woosc-menu-item a").length===0&&e(t.target).closest(".woosc-link a").length===0&&e(t.target).closest(".woosc-menu a").length===0&&e(t.target).closest(".woosc-sidebar-btn").length===0&&(woosc_vars.open_button===""||e(t.target).closest(woosc_vars.open_button).length===0)&&m()}),e(document).on("click touch",".woosc-area-open-sidebar",function(t){e(t.target).closest(".woosc-sidebar").length===0&&r()}),e(document).on("click touch",".woosc-sidebar-close, .woosc-sidebar-continue",function(){r()}),e(document).on("click touch",".woosc-sidebar-btn",function(e){e.preventDefault(),r(),k()}),e(document).on("click touch","#woosc-table-close",function(e){e.preventDefault(),d()}),e(document).on("change",".woosc-settings-field, .woosc-settings-tool",function(){b()}),woosc_vars.open_button!==""&&e(document).on("click touch",woosc_vars.open_button,function(n){n.preventDefault(),woosc_vars.open_button_action==="open_page"?woosc_vars.page_url!==""&&woosc_vars.page_url!=="#"&&(window.location.href=woosc_vars.page_url):(woosc_vars.open_button_action==="open_popup"&&(e(".woosc-table-items").hasClass("woosc-table-items-loaded")||t("table"),i(),a()),woosc_vars.open_button_action==="open_sidebar"&&(e(".woosc-sidebar-items").hasClass("woosc-sidebar-items-loaded")||t("sidebar"),p()))}),e(document).on("click touch",".woosc-menu-item a, .woosc-menu a, .woosc-link a",function(n){woosc_vars.menu_action==="open_popup"&&(n.preventDefault(),e(".woosc-table-items").hasClass("woosc-table-items-loaded")||t("table"),i(),a()),woosc_vars.menu_action==="open_sidebar"&&(n.preventDefault(),e(".woosc-sidebar-items").hasClass("woosc-sidebar-items-loaded")||t("sidebar"),p())});function j(){e(".woosc-search-result").html("").addClass("woosc-loading"),o=null;var t={action:"woosc_search",keyword:e("#woosc_search_input").val(),nonce:woosc_vars.nonce};e.post(woosc_vars.wc_ajax_url.toString().replace("%%endpoint%%","woosc_search"),t,function(t){e(".woosc-search-result").html(t).removeClass("woosc-loading")})}function s(e,t,n){var o,s=new Date;s.setTime(s.getTime()+n*24*60*60*1e3),o="expires="+s.toUTCString(),document.cookie=e+"="+t+"; "+o+"; path=/"}function n(e){for(var t,s=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(t=o[n];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(s)==0)return decodeURIComponent(t.substring(s.length,t.length))}return""}function C(){var e=l();return n(e)!=""?n(e):""}function A(){var o,i=l(),n=[];e(".woosc-bar-item").each(function(){var t=e(this).attr("data-id");t!==""&&n.push(t)}),o=n.join(),s(i,o,7),t("table")}function b(){var n=[],o=[],i="woosc_fields_"+woosc_vars.hash,a="woosc_settings_"+woosc_vars.hash;woosc_vars.user_id!==""&&(i+="_"+woosc_vars.user_id,a+="_"+woosc_vars.user_id),e(".woosc-settings-field").each(function(){var t=e(this).val();e(this).prop("checked")?(n.push(t),e(".woosc_table .tr-"+t).removeClass("tr-hide")):e(".woosc_table .tr-"+t).addClass("tr-hide")}),e(".woosc-settings-tool").each(function(){var t=e(this).val();e(this).prop("checked")&&o.push(t)}),s(i,n.join(","),7),s(a,o.join(","),7),t("table")}function g(t){var o,i,d,c=!1,r=woosc_vars.limit_notice,a=l();n(a)!==""?(o=n(a).split(","),o.length<woosc_vars.limit?(o=e.grep(o,function(e){return e!=t}),woosc_vars.adding==="append"?o.push(t):o.unshift(t),d=o.join(),s(a,d,7)):(c=!0,r=r.replace("{limit}",woosc_vars.limit)),i=o.length):(s(a,t,7),i=1),u(i),e(document.body).trigger("woosc_added",[i]),c?(e('.woosc-btn[data-id="'+t+'"]').removeClass("woosc-btn-adding woosc-adding"),alert(r)):e('.woosc-btn[data-id="'+t+'"]').each(function(){let t=e(this),n=t.data("text_added")!==void 0&&t.data("text_added")!==""?t.data("text_added"):woosc_vars.button_text_added;t.removeClass("woosc-btn-adding woosc-adding").addClass("woosc-btn-added woosc-added"),t.hasClass("woosc-btn-has-icon")?(t.find(".woosc-btn-icon").removeClass(woosc_vars.button_normal_icon).addClass(woosc_vars.button_added_icon),t.find(".woosc-btn-text").text(n)):t.text(n)})}function c(t){var i,r,a=0,o=l();t!=="all"?(n(o)!==""&&(i=n(o).split(","),i=e.grep(i,function(e){return e!==t}),r=i.join(),s(o,r,7),a=i.length),e('.woosc-btn[data-id="'+t+'"]').each(function(){let t=e(this),n=t.data("text")!==void 0&&t.data("text")!==""?t.data("text"):woosc_vars.button_text;t.removeClass("woosc-btn-added woosc-added"),t.hasClass("woosc-btn-has-icon")?(t.find(".woosc-btn-icon").removeClass(woosc_vars.button_added_icon).addClass(woosc_vars.button_normal_icon),t.find(".woosc-btn-text").text(n)):t.text(n)})):(n(o)!==""&&(s(o,"",7),a=0),e(".woosc-btn").each(function(){let t=e(this),n=t.data("text")!==void 0&&t.data("text")!==""?t.data("text"):woosc_vars.button_text;t.removeClass("woosc-btn-added woosc-added"),t.hasClass("woosc-btn-has-icon")?(t.find(".woosc-btn-icon").removeClass(woosc_vars.button_added_icon).addClass(woosc_vars.button_normal_icon),t.find(".woosc-btn-text").text(n)):t.text(n)})),u(a),e(document.body).trigger("woosc_removed",[a])}function h(){var s,t=l();n(t)!==""&&(s=n(t).split(","),e(".woosc-btn").each(function(){let t=e(this),n=t.data("text")!==void 0&&t.data("text")!==""?t.data("text"):woosc_vars.button_text;t.removeClass("woosc-btn-added woosc-added"),t.hasClass("woosc-btn-has-icon")?(t.find(".woosc-btn-icon").removeClass(woosc_vars.button_added_icon).addClass(woosc_vars.button_normal_icon),t.find(".woosc-btn-text").text(n)):t.text(n)}),s.forEach(function(t){e('.woosc-btn[data-id="'+t+'"]').each(function(){let t=e(this),n=t.data("text_added")!==void 0&&t.data("text_added")!==""?t.data("text_added"):woosc_vars.button_text_added;t.addClass("woosc-btn-added woosc-added"),t.hasClass("woosc-btn-has-icon")?(t.find(".woosc-btn-icon").removeClass(woosc_vars.button_normal_icon).addClass(woosc_vars.button_added_icon),t.find(".woosc-btn-text").text(n)):t.text(n)})}))}function t(t){var n={action:"woosc_load",get_data:t,nonce:woosc_vars.nonce};t==="table"&&e(".woosc-table-inner").addClass("woosc-loading"),t==="sidebar"&&e(".woosc-sidebar").addClass("woosc-loading"),e.post(woosc_vars.wc_ajax_url.toString().replace("%%endpoint%%","woosc_load"),n,function(n){if((t==="bar"||t==="table")&&(e(".woosc-bar-items").html(n.bar).addClass("woosc-bar-items-loaded"),e(document.body).trigger("woosc_bar_loaded")),t==="table"&&(e(".woosc-table-items").html(n.table).addClass("woosc-table-items-loaded"),e(window).width()>=768?woosc_vars.freeze_column==="yes"&&woosc_vars.freeze_row==="yes"?e("#woosc_table").tableHeadFixer({head:!0,left:1}):woosc_vars.freeze_column==="yes"?e("#woosc_table").tableHeadFixer({head:!1,left:1}):woosc_vars.freeze_row==="yes"&&e("#woosc_table").tableHeadFixer({head:!0}):woosc_vars.freeze_row==="yes"&&e("#woosc_table").tableHeadFixer({head:!0}),woosc_vars.scrollbar==="yes"&&e(".woosc-table-items").perfectScrollbar({theme:"wpc"}),e(".woosc-table-inner").removeClass("woosc-loading"),O(),_(),w(),e(document.body).trigger("woosc_table_loaded")),t==="sidebar"&&(e(".woosc-sidebar-items").html(n.sidebar).addClass("woosc-sidebar-items-loaded"),e(".woosc-sidebar").removeClass("woosc-loading"),woosc_vars.scrollbar==="yes"&&e(".woosc-sidebar-items").perfectScrollbar({theme:"wpc"}),e(document.body).trigger("woosc_sidebar_loaded")),(t==="bar"||t==="table"||t==="sidebar")&&(e(".woosc-bar-filter").html(n.filter),v(),e(document.body).trigger("woosc_filter_loaded")),t==="count"&&n.count!=null){var s=parseInt(n.count);u(s),e(document.body).trigger("woosc_count_loaded",[s])}})}function y(){let t=e(window).width(),n=JSON.parse(woosc_vars.quick_table_fixed);t>=1024&&e(".woosc-quick-table .woosc_table").tableHeadFixer({head:!1,left:n.pc}),t>=768&&t<1024&&e(".woosc-quick-table .woosc_table").tableHeadFixer({head:!1,left:n.ta}),t<768&&e(".woosc-quick-table .woosc_table").tableHeadFixer({head:!1,left:n.mo})}function i(){r(),e("#woosc-area").addClass("woosc-area-open-bar"),e(".woosc-bar").addClass("woosc-bar-open"),e(".woosc-bar-items").sortable({handle:"img",update:function(){A()}}),e(document.body).trigger("woosc_bar_open")}function f(){e("#woosc-area").removeClass("woosc-area-open-bar"),e(".woosc-bar").removeClass("woosc-bar-open"),e(document.body).trigger("woosc_bar_close")}function p(){f(),d(),e("#woosc-area").addClass("woosc-area-open-sidebar"),e(".woosc-sidebar").addClass("woosc-sidebar-open"),e(document.body).trigger("woosc_sidebar_open")}function r(){e("#woosc-area").removeClass("woosc-area-open-sidebar"),e(".woosc-sidebar").removeClass("woosc-sidebar-open"),e(document.body).trigger("woosc_sidebar_close")}function a(){r(),e("#woosc-area").addClass("woosc-area-open-table"),e(".woosc-table").addClass("woosc-table-open"),e(".woosc-bar-btn").addClass("woosc-bar-btn-open"),woosc_vars.bar_bubble==="yes"&&e(".woosc-bar").removeClass("woosc-bar-bubble"),e(document.body).trigger("woosc_table_open")}function d(){e("#woosc-area").removeClass("woosc-area-open woosc-area-open-table"),e(".woosc-table").removeClass("woosc-table-open"),e(".woosc-bar-btn").removeClass("woosc-bar-btn-open"),woosc_vars.bar_bubble==="yes"&&e(".woosc-bar").addClass("woosc-bar-bubble"),woosc_vars.hide_closed==="yes"&&f(),e(document.body).trigger("woosc_table_close")}function S(){e(".woosc-table").hasClass("woosc-table-open")?d():a()}function x(){e("#woosc-area").addClass("woosc-area-open"),t("table"),i(),a(),e(document.body).trigger("woosc_open")}function m(){e("#woosc-area").removeClass("woosc-area-open"),f(),d(),e(document.body).trigger("woosc_close")}function k(){e("#woosc-area").hasClass("woosc-area-open")?m():x(),e(document.body).trigger("woosc_toggle")}function E(){var t=e("#woosc-area").attr("data-bg-color"),n=e("#woosc-area").attr("data-btn-color");e(".woosc-table").css("background-color",t),e(".woosc-bar").css("background-color",t),e(".woosc-bar-btn").css("background-color",n),e(".woosc-sidebar-btn").css("background-color",n)}function v(){if(woosc_vars.bar_filter!=="no"&&e("#woosc-filter").length){var t=e("#woosc-filter").val().toLowerCase();t!=="_all_"?(e(".woosc_table .col").addClass("col-hide").hide(),e(".woosc_table .col-"+t).removeClass("col-hide").show(),e(".woosc-bar-item").addClass("woosc-bar-item-hidden"),e(".woosc-bar-item-"+t).removeClass("woosc-bar-item-hidden")):(e(".woosc_table .col").removeClass("col-hide").show(),e(".woosc-bar-item").removeClass("woosc-bar-item-hidden")),woosc_vars.hide_empty_row==="yes"&&e(".woosc_table > tbody > tr:not(.tr-print)").each(function(){var t=e(this),s=0,n=!0;t.removeClass("tr-empty").show(),t.children(".col:not(.col-hide)").each(function(){if(e(this).html().length>0)return n=!1,!1}),n&&t.addClass("tr-empty").hide()})}}function u(t){if(t==="first"){var s,n=C();n!=""?(s=n.split(","),t=s.length):t=0}e(".woosc-menu-item").each(function(){e(this).hasClass("menu-item-type-woosc")?e(this).find(".woosc-menu-item-inner").attr("data-count",t):e(this).addClass("menu-item-type-woosc").find("a").wrapInner('<span class="woosc-menu-item-inner" data-count="'+t+'"></span>')}),e("#woosc-area").attr("data-count",t),e(".woosc-bar").attr("data-count",t),e(".woosc-sidebar-count").text(" ("+t+")"),e(".woosc-link .woosc-link-inner").attr("data-count",t),e(".woosc-bar-items").removeClass("woosc-bar-items-loaded"),e(".woosc-sidebar-items").removeClass("woosc-sidebar-items-loaded"),e(".woosc-table-items").removeClass("woosc-table-items-loaded"),e(document.body).trigger("woosc_change_count",[t])}function O(){woosc_vars.hide_empty_row==="yes"&&e(".woosc_table > tbody > tr").each(function(){var t=e(this),n=0,s=!0;t.children("td").each(function(){if(n>0&&e(this).html().length>0)return s=!1,!1;n++}),s&&t.addClass("tr-empty").remove()})}function w(){e("#woosc_highlight_differences").prop("checked")?e(".woosc_table > tbody > tr").each(function(){var t=e(this),n=0,o=e(this).children("td").eq(1).html(),s=!1;t.children("td:not(.td-placeholder)").each(function(){if(n>1&&e(this).html()!==o)return s=!0,!1;n++}),s&&t.addClass("tr-highlight")}):e(".woosc_table tr").removeClass("tr-highlight")}function _(){e("#woosc_hide_similarities").prop("checked")?e(".woosc_table > tbody > tr").each(function(){var t=e(this),n=0,o=e(this).children("td").eq(1).html(),s=!0;t.children("td:not(.td-placeholder)").each(function(){if(n>1&&e(this).html()!==o)return s=!1,!1;n++}),s&&t.addClass("tr-similar")}):e(".woosc_table tr").removeClass("tr-similar")}function l(){return woosc_vars.user_id!==""?"woosc_products_"+woosc_vars.user_id:"woosc_products"}})(jQuery)